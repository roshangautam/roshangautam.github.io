{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-to-create-personal-blog-gatsby-github-pages-github-actions/","result":{"data":{"site":{"siteMetadata":{"title":"Reveries of a software engineer"}},"markdownRemark":{"id":"803ee711-62d2-59ed-9e24-6f1d60c6fa45","excerpt":"In this article we will explore a set of tools and services which will let you build a personal blog and help setup an automated publishing pipeline. The idea…","html":"<p style=\"text-align: center;\">\n  <img src=\"/5f16c897f756084c73f0df782d8a0baf/personal-websites-101.svg\">\n</p>\n<p>In this article we will explore a set of tools and services which will let you build a personal blog and help setup an automated publishing pipeline. The idea is to write your content in markdown and publish it to github pages.</p>\n<p>To build a personal blog we need to solve for the following</p>\n<ul>\n<li>A server to host your blog,</li>\n<li>An easy way to write &#x26; publish your content.</li>\n</ul>\n<h2>Getting Started</h2>\n<h3><a href=\"https://pages.github.com/\">Github Pages</a></h3>\n<p>To solve our first problem, we will use github pages to host our personal blog. If you own a personal domain, you can configure github pages to use your custom domain at no cost. Isn’t that wonderful.</p>\n<blockquote>\n<p>If you don’t have a github account, please visit <a href=\"https://github.com\">Github</a> and signup for a free account.</p>\n</blockquote>\n<h3><a href=\"https://www.gatsbyjs.com/\">Gatsby</a></h3>\n<p>To solve our second problem, we will using Gatsby to write our content. Gatsby is a static site generator framework built using react/javascript and provides pre built blogging templates. The best part is you can create your content using <a href=\"https://www.markdownguide.org/\">markdown</a> and dont worry about any other technicalities. Gatsby will generate an html version of the content written in Markdown. Pick a template and off you go.</p>\n<p>To publish the content written in markdown &#x26; Gatsby’s blog template, we will use <a href=\"https://github.com/features/actions\">github actions</a>. The minute you will add/update content and save it to your github repository an automated workflow will run and generate an html version of your markdown content and publish it to github pages.</p>\n<blockquote>\n<p>There are several other static site generators available online. You can use any of them. For this article we are using Gatsby.</p>\n</blockquote>\n<p>Let’s walk through the steps required to get you up and running.</p>\n<h4>Install required tools</h4>\n<p>Install the following tools. Skip this step if you already have’em</p>\n<ul>\n<li><a href=\"https://code.visualstudio.com/\">VS Code</a> - Editor of choice. Install markdown extensions to help with content writing</li>\n<li><a href=\"https://nodejs.org\">NodeJS</a> - To run your blog locally</li>\n<li><a href=\"https://www.gatsbyjs.com/docs/tutorial/part-0/#gatsby-cli\">Gatsby Cli</a> - To create and run your blog locally</li>\n<li><a href=\"https://hub.github.com/\">Hub</a> - Optional, used to maintain github account from a command line</li>\n</ul>\n<blockquote>\n<p>macOS users can use <a href=\"https://brew.sh/\">homebrew</a> to install these tools. Likewise, you can use\n<a href=\"https://chocolatey.org/\">chocolatey</a> in Windows and <code class=\"language-text\">yum/apt</code> in Redhat or Debian based Linux distros.</p>\n</blockquote>\n<h4>Project Setup</h4>\n<p>Let’s create a new Gatsby site using the <a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/\">blog starter template</a>. You can use any other starter templates listed at <a href=\"https://www.gatsbyjs.com/starters\">Gatsby’s website</a>. Fire up a terminal of your choice and execute the following command. This is where the blog will be created in your machine, so pick a desired location.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">gatsby new my-awesome-blog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>\n<p>Now you will open <code class=\"language-text\">gatsby-config.js</code> to update basic settings for the newly created blog. Locate <code class=\"language-text\">siteMedataData</code> and make the necessary changes by updating site title, author name etc. All the markdown content is located at <code class=\"language-text\">app/content/blog</code> where each article is in its own folder.</p>\n<p>Now let’s create a new github repository called <code class=\"language-text\">my-awesome-blog</code>. You can either visit <a href=\"https://github.com\">Github</a> or use <a href=\"https://hub.github.com/\">hub</a> from your command line to create your new repository. Once you are done creating the repository, fire up your favorite terminal and execute the following commands</p>\n<blockquote>\n<p>Important : Replace username with your github username and repository with the name of newly created github repository.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git remote add origin git@github.com:my-awesome-github-username/my-awesome-blog.git</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git commit -m &quot;Initial Commit&quot;</code></pre></div>\n<p>Push your changes to github</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git push --set-upstream origin master</code></pre></div>\n<h4>Configure auto publishing</h4>\n<p>The idea is to setup a workflow such that every new commit to the master branch would automatically publish it to github pages. To achieve this we will complete the following one time setup steps</p>\n<h5>Create an access token</h5>\n<p>First, let’s create an access token. We will use this token in the workflow as a secret variable called <code class=\"language-text\">ACCESS_TOKEN</code> in a few minutes</p>\n<ul>\n<li>Use the instructions listed <a href=\"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token\">here</a> to create an access token with <code class=\"language-text\">repo</code> permissions</li>\n<li>Use the instructions listed <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets#creating-encrypted-secrets\">here</a> to create a secret called <code class=\"language-text\">ACCESS_TOKEN</code> to use in the workflow</li>\n</ul>\n<h5>Create a github action</h5>\n<p>You can create a github action in two different ways.</p>\n<ul>\n<li>By adding a <code class=\"language-text\">.yml</code> file to the root of your project under <code class=\"language-text\">github/.workflows</code> directory.</li>\n<li>OR, by navigating to your repository in github and using the <code class=\"language-text\">New Worflow</code> option under <code class=\"language-text\">Actions</code> tab.</li>\n</ul>\n<p>The latter will automatically create a commit and push it to your default branch in github.</p>\n<p>In this blog we will use the first option. Let’s start by creating the directories and the file. Run the following commands from the root of the project</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">mkdir .github &amp;&amp; mkdir .github\\workflows\ntouch .github\\workflows\\gh-pages.yml</code></pre></div>\n<h5>Configure the workflow</h5>\n<p>Open <code class=\"language-text\">gh-pages.yml</code> in an editor and paste the following content</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Publish to Github Pages\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages</code></pre></div>\n<p>This is telling github to use <a href=\"https://github.com/enriikke/gatsby-gh-pages-action\">Gatsby Github action</a> which takes care of building the static content and publishing it to <code class=\"language-text\">gh-pages</code> branch in the github repository. Learn more about other input options available in the action <a href=\"https://github.com/enriikke/gatsby-gh-pages-action#knobs--handles\">here</a></p>\n<p>Next create a commit</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git commit -m &quot;Add publishing workflow for github pages&quot;</code></pre></div>\n<p>And push your changes to github</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git push</code></pre></div>\n<p>Now navigate to the actions tab in github. You should observe a workflow action running. Wait until it completes.</p>\n<p>As soon as the workflow completes successfully, your site should be live at <a href=\"http://username.github.io/repository\">http://username.github.io/repository</a>.</p>\n<p>Awesome Job !!!</p>\n<h4>Publishing Workflow</h4>\n<p>Now whenever you want to add a new article to your blog or update your sites content, you would add/update markdown files to your new created github repository. You can do so in different ways.</p>\n<ul>\n<li>Add/update markdown files from github using their web editor and save. This will automatically create a commit in the github repository.</li>\n<li>OR, Add/update content locally, create a commit and push it to the remote github repository.</li>\n</ul>\n<p>Pushing a commit to the master branch will trigger the workflow we created above and publish your site to github pages.</p>\n<p>If you want to add/update content locally first:</p>\n<ol>\n<li>Make changes in <code class=\"language-text\">content/blog</code> folder</li>\n</ol>\n<blockquote>\n<p>To preivew changes locally run <code class=\"language-text\">gatsby develop</code> from the root of your project folder. This will start a localhost server pointing to the folder in your machine. This also watches for changes and referesh the browser automatically.</p>\n</blockquote>\n<ol start=\"2\">\n<li>Create a commit</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git commit -m &quot;new article xyz&quot;</code></pre></div>\n<ol start=\"3\">\n<li>Push your changes to github</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git push</code></pre></div>\n<p>This should start the worflow we configured above and publish any new changes to github pages.</p>\n<h4>Custom domains</h4>\n<p>This all sounds good but what about custom domains? If you own a custom domain and want to point it to github pages</p>\n<ul>\n<li>Visit your github repository settings and add your custom domain to github pages settings as shown below</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a0b00b487a4548b3113249b90fd8bfa4/7608e/github-pages-settings.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.37974683544303%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACK0lEQVQ4y52UDW+bQAyG+f+/butUaWuTthAgKQ133Pc37+QjrRKpraaBHtn4kLFf39G8tC8Yhh5t26I7HPC/10r3uqLRNkPbAmcjjDJIPlZyiIg+VD84j+hjJbiAYH2Ne+u3Zxew5pWyonnSM36LCXt5wuP8jB1rsecD9suIh7nHjg94ZAe0akSnRrzIAc+iR6ePFXp+ET1O8Qy+KjS73OHeP+De7/DT/MEv94g71+POjfhhR/x0I+7DiD1GPFeOF0Y8fcRG7NCjLSc0TCw4sxkhR8ScLkSEHDaSr2yxCJ8CfEpwKSGWhLQmpGpztY1SGtN0BmMc88ywLAKML+B8qb4UEvQOIaWCVhrCZnBTkEm3bSKboaEY63AYjujHE4bjK5RxmIWCC/HbmV7mWpNUsKKUgoaqarsObdthZgzW2iscjLFwzsL4DOUKclk/qiHefbpKqRVaCLm1JZWC1gbWuauE5suEH/VeJ7TOY3ydcJrOOE5vuHrv24Y/i9SE2hgwzutQnHP1a6QFkYl8a8unrBcKGprmoe/rsZumNwghIYTAQiyi+gTn/OKTPApSbpakYTph1hkpFzQhxksSCaU1YoxgQoFL/XXL63ozlJuWQwjwPmCzvi7U1v5FzJuPYGtZa422O2AYRpxep7pN3rcL6Uv23VfawDhf1yvOwTlftU85bxubxKZWJZ0AqcCXpW4jvpCOsp4Y8inGpMWb8LAuVGkC/ZHIxoicc63wL6Pj2X2f7WwuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github Pages Settings\"\n        title=\"Github Pages Settings\"\n        src=\"/static/a0b00b487a4548b3113249b90fd8bfa4/f058b/github-pages-settings.png\"\n        srcset=\"/static/a0b00b487a4548b3113249b90fd8bfa4/c26ae/github-pages-settings.png 158w,\n/static/a0b00b487a4548b3113249b90fd8bfa4/6bdcf/github-pages-settings.png 315w,\n/static/a0b00b487a4548b3113249b90fd8bfa4/f058b/github-pages-settings.png 630w,\n/static/a0b00b487a4548b3113249b90fd8bfa4/7608e/github-pages-settings.png 735w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Visit your domain registrars website and add one of these as an <code class=\"language-text\">A</code> record to your domain’s DNS settins</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sbtshell\"><pre class=\"language-sbtshell\"><code class=\"language-sbtshell\">185.199.108.153\n185.199.109.153\n185.199.110.153\n185.199.111.153</code></pre></div>\n<blockquote>\n<p>You just need one of the entries to work. Depdending on how long does your DNS provider takes time to propagate the changes, your domain should start pointing at your github pages repo within a few minutes to a couple of hours. Read more about custom domains in github pages <a href=\"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages\">here</a></p>\n</blockquote>\n<blockquote>\n<p>This site is also hosted in github pages. You can find the repository <a href=\"https://github.com/roshangautam/roshangautam\">here</a>.</p>\n</blockquote>\n<p><strong><em>Thats it folks !!!</em></strong></p>","frontmatter":{"title":"How to create a personal blog using Gatsby, Github Pages & Github Actions","date":"July 10, 2021","description":"In this article we will explore a set of tools and services which will let you build a personal blog and help setup an automated publishing pipeline.","coverImage":"/assets/images/posts/covers/personal-websites-101.svg"}},"previous":{"fields":{"slug":"/how-to-create-personal-blog-jigsaw-github-pages/"},"frontmatter":{"title":"How to create a personal blog using Jigsaw and Github Pages"}},"next":null},"pageContext":{"id":"803ee711-62d2-59ed-9e24-6f1d60c6fa45","previousPostId":"241d1857-a334-52d1-8e7a-593a08d7e49d","nextPostId":null}},"staticQueryHashes":["2114561082","2841359383"]}